!function(e,t,o){var n,a=e.getElementsByTagName(t)[0]
e.getElementById(o)||(n=e.createElement(t),n.id=o,n.src="http://connect.facebook.net/en_US/sdk.js",a.parentNode.insertBefore(n,a))}(document,"script","facebook-jssdk")
var fbwrap={debug:!0,isLoggedIn:!1,userID:null,user:null,pages:null,__pages:{next:null,prev:null,more:!0},photos_limit:25,initialize:function(){FB.init({appId:"370557326444175",xfbml:!0,cookie:!0,version:"v2.5"})},isConnected:function(e){FB.getLoginStatus(function(t){return fbwrap.log(t,"info"),"connected"===t.status?(fbwrap.log("Logged in"),fbwrap.isLoggedIn=!0,e&&e(),!0):(fbwrap.log("Not logged in"),fbwrap.isLoggedIn=!1,e&&e(),!1)})},login:function(e){FB.login(function(t){"connected"===t.status?(fbwrap.log(t,"info"),fbwrap.log("Logged in successfully"),fbwrap.userID=t.authResponse.userID,fbwrap.isLoggedIn=!0):fbwrap.log(t,"error"),e&&e()},{scope:"manage_pages, public_profile",auth_type:"rerequest"})},logout:function(e){fbwrap.log("Logged out"),fbwrap.isLoggedIn=!1,FB.logout(),e&&e()},getUser:function(e){return FB.api("me?fields=picture,name","GET",function(t){fbwrap.log(t,"info"),fbwrap.user=new fbwrap.User(t),e&&e()})},getPages:function(e,t){var o="me/accounts?fields=likes,name,talking_about_count,picture,photos,albums,access_token&limit=25"
return t&&(o+="&after="+t),FB.api(o,"GET",function(t){fbwrap.log(t,"info"),fbwrap.pages=[]
for(var o in t.data)fbwrap.pages.push(new fbwrap.Page(t.data[o]))
t.paging&&(fbwrap.__pages.more=25===fbwrap.pages.length,fbwrap.__pages.next=t.paging.cursors.after,fbwrap.__pages.prev=t.paging.cursors.before),e&&e()})},getNextPages:function(e){fbwrap.getPages(e,fbwrap.__pages.next)},hasMorePages:function(e){return fbwrap.__pages.more},setPhotosLimit:function(e){fbwrap.photos_limit=e},log:function(e,t){switch(t){case"error":console.error(e)
break
case"info":fbwrap.debug&&console.info(e)
break
case"debug":default:fbwrap.debug&&console.log(e)}},inspect:function(){return fbwrap.debug?console.info(fbwrap):void 0},Page:function(e){this.id=e.id,this.name=e.name,this.thumb=e.picture.data.url,this.albums=[]
for(var t in e.albums.data)this.albums.push(new fbwrap.Album(e.albums.data[t]))},Album:function(e){this.id=e.id,this.name=e.name,this.photos=[],this.pagination={next:null,previous:null,more:null}},Photo:function(e){this.id=e.id,this.name=e.name,this.source=e.source,this.thumb=e.picture},User:function(e){this.id=e.id,this.name=e.name,this.picture=e.picture.data.url}}
fbwrap.Album.prototype.getPhotos=function(e,t){var o=this,n=this.id+"/photos?fields=name,source,picture&limit="+fbwrap.photos_limit
t&&(n+="&after="+t),FB.api(n,"GET",function(t){o.photos=[]
for(var n in t.data)o.photos.push(new fbwrap.Photo(t.data[n]))
t.paging&&(o.pagination.more=o.photos.length===fbwrap.photos_limit,o.pagination.next=t.paging.cursors.after,o.pagination.previous=t.paging.cursors.before),fbwrap.log(t,"info"),e&&e()})},fbwrap.Album.prototype.getNextPhotos=function(e){this.getPhotos(e,this.pagination.next)},fbwrap.Album.prototype.hasMorePhotos=function(){return this.pagination.more}
